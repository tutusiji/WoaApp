# WoaApp 截图功能使用说明

## 功能概述

本项目已成功添加了截图功能，支持以下特性：

- 🖱️ **点击截图**: 通过页面中的截图按钮进行截图
- ⌨️ **快捷键截图**: 使用 `Alt+Shift+A` 快捷键快速截图
- 📋 **自动保存到剪贴板**: 截图后自动保存到系统剪贴板
- 🔔 **智能通知**: 截图成功或失败都会显示相应通知
- 📍 **多位置按钮**: 截图按钮会插入到页面的多个位置

## 使用方法

### 1. 快捷键截图
- 按下 `Alt+Shift+A` 组合键
- 系统会自动截取当前窗口内容
- 截图成功后会显示通知，图片已保存到剪贴板

### 2. 按钮截图
应用会在页面中插入截图按钮，包括：

#### 浮动截图按钮
- 位置：页面右上角（绿色按钮）
- 显示：📸 截图
- 功能：点击即可截图

#### Tab导航栏截图按钮
- 位置：tab-nav导航栏最底部
- 显示：📸图标 + "截图"文字
- 功能：与浮动按钮功能相同

### 3. 截图后使用
- 截图完成后，图片自动保存到系统剪贴板
- 可以直接在聊天窗口按 `Ctrl+V` 粘贴图片
- 支持粘贴到任何支持图片的应用程序

## 技术实现

### 模块化设计
截图功能采用模块化设计，主要包含以下文件：

- `src/main/screenshot.ts` - 截图管理器模块
- `src/main/index.ts` - 主进程集成
- `src/preload/index.ts` - 预加载脚本API

### 核心功能
1. **截图管理器** (`ScreenshotManager`)
   - 处理截图逻辑
   - 管理全局快捷键
   - 生成前端注入脚本

2. **IPC通信**
   - `take-screenshot` - 截图处理通道
   - 返回截图结果状态

3. **前端集成**
   - 自动检测并插入截图按钮
   - 键盘快捷键监听
   - 用户通知系统

### 错误处理
- 窗口不可用时的错误提示
- 截图失败时的重试提示
- API不可用时的降级处理

## 开发说明

### 文件结构
```
src/
├── main/
│   ├── index.ts          # 主进程入口，集成截图管理器
│   └── screenshot.ts     # 截图功能模块
├── preload/
│   ├── index.ts          # 预加载脚本，暴露截图API
│   └── index.d.ts        # 类型定义
└── renderer/
    └── ...               # 渲染进程文件
```

### 扩展功能
如需扩展截图功能，可以：

1. 修改 `screenshot.ts` 中的 `ScreenshotManager` 类
2. 添加新的快捷键组合
3. 自定义截图按钮样式
4. 添加截图格式选项（PNG/JPEG）
5. 实现截图区域选择功能

### 依赖包
- `electron` - Electron框架核心
- `electron-screenshot` - 截图功能依赖（已安装）

## 常见问题

### Q: 快捷键不生效？
A: 确保应用有焦点，且快捷键没有被其他应用占用。

### Q: 截图按钮没有显示？
A: 等待页面完全加载，按钮会在页面加载完成后自动插入。

### Q: 截图后粘贴不成功？
A: 检查目标应用是否支持图片粘贴，或者尝试在其他应用中粘贴测试。

### Q: 截图质量问题？
A: 当前使用默认质量设置，如需调整可修改截图管理器中的相关参数。

## 更新日志

### v1.0.0 (2025-06-21)
- ✅ 添加基础截图功能
- ✅ 支持Alt+Shift+A快捷键
- ✅ 自动保存到剪贴板
- ✅ 多位置截图按钮
- ✅ 模块化代码结构
- ✅ 完整的错误处理
- ✅ 用户友好的通知系统

---

**开发者**: GitHub Copilot  
**项目**: WoaApp Electron 应用
**功能**: 截图功能模块
